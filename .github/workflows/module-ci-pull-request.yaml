name: module-ci-pull-request
on: workflow_call

jobs:
  pull-request:
    runs-on: ubuntu-latest
    permissions:
      pull-requests: read
    steps:
      - uses: mheap/github-action-required-labels@v5
        with:
          mode: exactly
          count: 1
          labels: "breaking-change,feature,fix,other,ignore-release"

      - name: Test if GitHub Actions ref is main
        run: |
          echo workflow_ref=${{ github.workflow_ref }}
          echo repository="${{ github.repository }}/"
          echo repo_ref="@${{ github.ref }}"
          echo workflow_path=${workflow_ref#"$repository"}
          echo workflow_path=${workflow_path%"$repo_ref"}
